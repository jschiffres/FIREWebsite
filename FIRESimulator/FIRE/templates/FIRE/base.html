{% load static %}

<!doctype html>
<html lang="en">

<head>

  <!--BOOTSTRAP CDN-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

  <!--BOOTSTRAP JS-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

  <!--BOOTSTRAP ICONS-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

  <!--POPPER JS-->
  <script src="https://unpkg.com/@popperjs/core@2"></script>

  <!--HTMX JS-->
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"></script>

  <!--CHARTJS JS-->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!--PROJECT CSS-->
  <link rel="stylesheet" type="text/css" href="{% static '/main.css' %}"> 

  <title>FIRE Simulator</title>

</head>

<body hx-headers='{"x-csrftoken": "{{ csrf_token }}"}'>

{% if request.path == "/new/" %}
<nav id="navbar-main" class="navbar navbar-expand-lg border-bottom border-body mb-5" data-bs-theme="dark">
{% else %}
<nav id="navbar-main" class="navbar navbar-expand-lg border-bottom border-body sticky-top mb-3" data-bs-theme="dark">
{% endif %}
  <div class="container-fluid">
    <a class="navbar-brand newclass" href="{% url 'landing' %}"><i class="bi bi-fire"></i> FIRE PLANNER</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  {% if user.is_authenticated %}
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item dropdown">
          <a class="nav-link  link-light dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Welcome {{ user.username }}
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="{% url 'usersimulations' %}">My Simulations</a></li>
            <li><a class="dropdown-item" href="#">My Account</a></li>
          </ul>
        </li>
      </ul>
      <table>
        <form action="{% url 'newsimulation' %}">
          <button type="submit" class="btn btn-success me-2"><i class="bi bi-plus-circle-fill"></i> New Simulation</i></button>
        </form>
        <form action="{% url 'logoutuser' %}" method="POST">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger"><i class="bi bi-person-fill-x"></i> Logout</i></button>
        </form>
      </table>
    </div>
  {% else %}
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 text-center">
      </ul>
      <table>
        <form action="{% url 'newsimulation' %}">
          <button type="submit" class="btn btn-success me-2"><i class="bi bi-plus-circle-fill"></i> New Simulation</i></button>
        </form>
        <form action="{% url 'loginuser' %}">
              <button type="submit" class="btn btn-secondary me-2"><i class="bi bi-person-fill-check"></i> Login</i></button>
        </form>
        <form action="{% url 'signupuser' %}">
            <button type="submit" class="btn btn-warning"><i class="bi bi-person-fill-add"></i> Sign-up</i></button>
        </form>
      </table>
    </div>
  {% endif %}
  </div>
</nav>

<div class="container">

  {% if messages %}
    {% for message in messages %}

      <div class="alert alert-info alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>

    {% endfor %}
  {% endif %}

  {% block content %}

  {% endblock %}

</div>

<footer id="footer" class="py-3 my-4 w-100">
  <p class="m-0">&copy; FIRE Planner 2025</p>
</footer>

</body>